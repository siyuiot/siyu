# 在线转换json refs: https://json.im/json2/yaml2json.html
UserInfo: &ui
  uid: 12345 # 用户编号
  phoneNum: "188****8888" # 用户手机号码

Api:
  - url: "/user/login/minapp" # 小程序登录
    request:
      minapp:
        appId: wxb71c87a341a6eda7
        code: abc123
        iv: abc123
        encryptedData: abc123
    response:
      state: 0 # 状态码
      stateInfo: OK # 状态描述
      data:
        token: abc123 # 用户口令
        expires: 7200 # 口令过期时间，单位秒
        user: *ui
    # eg:
    #   curl https://siyu.d.blueshark.com/user/login/minapp \
    #   -H 'Authorization: Bearer test-xxxxxxxxxxxxxxxxxxxxx' \
    #   -H 'Ts:1566489600' \
    #   -H 'Sgagent: MP|||||com.siyu.iot|||' \
    #   -d '{
    #     "minapp": {
    #       "appId": "wxb71c87a341a6eda7",
    #       "code": "acaefbf460869bb8c884899382087ff015c117781f7a1628f572a00a6cd28195",
    #       "iv": "abc123",
    #       "encryptedData": "abc123"
    #     }
    #   }'
  - url: "/productSku/get/list" # 商品库存列表
    request:
      pid: 1
    response:
      state: 0 # 状态码
      stateInfo: OK # 状态描述
      data:
        - skuId: 1
          name: "流量，包月"
          price: 100 # 单位 分
          des: "" # 商品描述
    # eg:
    #   curl https://siyu.d.blueshark.com/product/get/list \
    #   -H 'Authorization: Bearer test-xxxxxxxxxxxxxxxxxxxxx' \
    #   -H 'Ts:1566489600' \
    #   -H 'Sgagent: MP|||||com.siyu.iot|||' \
    #   -d '{"pid": 1}'
  - url: "/userSim/bind" # 绑定sim卡
    request:
      iccid: "18616854987"
      pku: "123456"
    response:
      state: 0 # 状态码
      stateInfo: OK # 状态描述
    # eg:
    #   curl http://siyu.d.blueshark.com/userSim/bind \
    #   -H 'Authorization: Bearer test-xxxxxxxxxxxxxxxxxxxxx' \
    #   -H 'Ts:1566489600' \
    #   -H 'Sgagent: MP|||||com.siyu.iot|||' \
    #   -d '{
    #     "iccid": "18616854987",
    #     "pku": "123456"
    #   }'
  - url: "/userSim/get/list" # 用户sim列表
    request:
      
    response:
      state: 0 # 状态码
      stateInfo: OK # 状态描述
      data:
        - sid: 1 # sim卡id
          simNo: "186111111111" # sim卡号
    # eg:
    #   curl http://siyu.d.blueshark.com/userSim/get/list \
    #   -H 'Authorization: Bearer test-xxxxxxxxxxxxxxxxxxxxx' \
    #   -H 'Ts:1566489600' \
    #   -H 'Sgagent: MP|||||com.siyu.iot|||' \
    #   -d '{}'
  - url: "/userSim/get/info" # 用户sim信息
    request:
      sid: 1
    response:
      state: 0 # 状态码
      stateInfo: OK # 状态描述
      data:
        sid: 1 # sim卡id
        simNo: "186111111111" # sim卡号
        bindTs: 1653323424 # 用户绑定卡时间戳=用户使用开始时间戳
        serviceDuration: # 用户购买套餐时长 单位：月 1=1个月 12=1年
        serviceEndTs: 1654187424 # 服务结束时间戳=用户使用截止时间戳
        simByte: 307200 # sim卡流量=用户购买流量
        simAvailableByte: 307200 # sim卡可用流量=用户剩余流量
    # eg:
    #   curl http://siyu.d.blueshark.com/userSim/get/info \
    #   -H 'Authorization: Bearer test-xxxxxxxxxxxxxxxxxxxxx' \
    #   -H 'Ts:1566489600' \
    #   -H 'Sgagent: MP|||||com.siyu.iot|||' \
    #   -d '{"sid":1}'
  - url: "/simOrder/submit" # sim套餐订单提交
    request:
      sid: 1 # sim卡id
      skuId: 2 # 套餐id
    response:
      state: 0 # 状态码
      stateInfo: OK # 状态描述
      data:
        ono: "20220525115600" # 订单编号
    # eg:
    #   curl http://siyu.d.blueshark.com/simOrder/submit \
    #   -H 'Authorization: Bearer test-xxxxxxxxxxxxxxxxxxxxx' \
    #   -H 'Ts:1566489600' \
    #   -H 'Sgagent: MP|||||com.siyu.iot|||' \
    #   -d '{"sid":1,"skuId":2}'

# 2022/05/28 16:41:13.692080Z I user qgin/log.go:62 url=/simOrder/payment/notify req={"id":"f050a6cb-ae78-515e-88b0-f81b723ecc28","create_time":"2022-05-29T00:41:13+08:00","resource_type":"encrypt-resource","event_type":"TRANSACTION.SUCCESS","summary":"支付成功","resource":{"original_type":"transaction","algorithm":"AEAD_AES_256_GCM","ciphertext":"1yTrMT98a29F4/dnnrr4sflcNXWFeJxtw9yj/yzO/VFYMm3fuNw4sKjSawUMf1AtCGgZYrWpOgf4rA8cyFMB6JEoO+yYtQ6/Fa6198MGCTudvqoAcbiwbISBzT2iAOCCNwILeCuXrXbf4eczqCRxvbmD5D6KMtqjlNz04qEs5IlHz0X5szhDihaGZm06LgXEb7J022Vza7u4XgkVEgDy7lB0a0+5w9zuhhU/ZlGKkLR2thSI8gW/y+spucsHpQbkrnuUf4ERFD/h+pT/lpXIwJh5cbEUKEq9tC/9DtZ3eLg3eWE7tXUph/9UY3B4Kz/A5X7M+Sg/0L6R5xbX0cvSALtUqxBRV/3nytoESAkUCu10XPYvgDNqZwe3ZB9yQrgfOKQalVTjcc1gbAHphODjrM/bgYUmdMYbEFTSadqiJVrYppa4GDwzeAARH5xQ82YZ84SGw76jqnJuADBVt8s4RMLCGhlLBFLHrg1YYE4j2OaBmZxEMfm+IBYJJKS5VEAWl/N9ZPxruA3XGV0jxUaj+rJBPTQhfSiyYBm0ZZodACmFoye+61rDpl1w7/UaTuu30ERTwdkJKR8sDEU+UA==","associated_data":"transaction","nonce":"iTJ6suFD5SLN"}} ip=192.168.0.249 requestId=
